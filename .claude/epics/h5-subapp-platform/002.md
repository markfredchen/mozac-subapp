---
name: cli-foundation-project-scaffolding
epic: h5-subapp-platform
status: backlog
created: 2025-09-20T03:51:05Z
depends_on: [001]
parallel: false
conflicts_with: []
size: L
hours: 24
---

# Task 002: CLI Foundation and Project Scaffolding

## Description

Build the foundational CLI using Commander.js to provide project scaffolding commands, project initialization, and basic validation. This CLI will be the primary interface for developers to create new sub-applications and manage the development workflow.

## Acceptance Criteria

- [ ] CLI package created in tools/cli with proper TypeScript setup
- [ ] Commander.js integrated with command structure and help system
- [ ] Project scaffolding command (`create subapp <name>`) implemented
- [ ] Template system for generating boilerplate sub-application code
- [ ] Input validation for project names and configuration options
- [ ] Interactive prompts for project configuration (framework version, features)
- [ ] Basic help documentation and command usage examples
- [ ] CLI binary properly configured for global installation
- [ ] Error handling with user-friendly messages
- [ ] Unit tests covering all CLI commands and validation logic

## Technical Details

### CLI Command Structure
```
h5-cli
├── create subapp <name>     # Scaffold new sub-application
├── create component <name>  # Generate shared component
├── build [app]             # Build specific or all apps
├── dev [app]               # Start development server
├── lint [app]              # Run linting
└── help                    # Show help and usage
```

### Template System
- React + TypeScript boilerplate with mobile-optimized configuration
- Arco Design Mobile integration with essential components
- Pre-configured build scripts and development setup
- Basic routing structure with hash-based navigation
- State management setup with Zustand
- Testing framework integration (Jest + React Testing Library)

### Key Features
- Interactive project setup with prompts for configuration
- Validation for project names (kebab-case, no conflicts)
- Template customization based on selected features
- Automatic dependency installation using pnpm
- Git initialization and initial commit
- Integration with existing workspace structure

### Technical Requirements
- Commander.js for CLI framework
- Inquirer.js for interactive prompts
- fs-extra for file system operations
- chalk for colored console output
- Handlebars for template processing

## Dependencies

**Depends on**: [001] - Requires monorepo structure and workspace configuration

**Enables**: Project creation and development workflow for all subsequent tasks

## Effort Estimate

**Size**: L (Large)
**Hours**: 24
**Complexity**: High - Complex CLI with template system and validation

## Definition of Done

- [ ] CLI can successfully scaffold a new sub-application
- [ ] Generated projects build and run without errors
- [ ] All CLI commands have proper help documentation
- [ ] Input validation prevents invalid project configurations
- [ ] Error messages are clear and actionable
- [ ] CLI can be installed globally and used from any directory
- [ ] Unit test coverage > 90% for all CLI functionality
- [ ] Integration tests verify complete scaffolding workflow
- [ ] Performance: Project creation completes in < 30 seconds
- [ ] Documentation includes CLI usage examples and troubleshooting guide